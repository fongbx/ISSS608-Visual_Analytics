{
  "hash": "f09f34f767af25432b78b73ba48ba1a5",
  "result": {
    "markdown": "---\ntitle: \"Take-home Exercise 3\"\nsubtitle: \"Detect Anomalies in Fishing-Related Companies\"\nauthor: \"Fong Bao Xian\"\ndate: \"5 June 2023\"\ndate-modified: \"2023-06-03\"\n---\n\n\n# Overview\n\nThis exercise references [Mini-Challenge 3](https://vast-challenge.github.io/2023/MC3.html) of VAST Challenge 2023. The objective of the exercise is to help FishEye International identify companies possibly engaged in illegal, unreported and unregulated (IUU) fishing through analysis of anomalous company structures.\n\nWe will focus on task 1 in the mini-challenge, which is to use visual analytics to identify anomalies in the business groups present in the knowledge graph.\n\n# Getting Started\n\n## Import R Packages\n\nFor this exercise, we will be using the following packages:\n\n-   [**tidyverse**](https://www.tidyverse.org/#:~:text=The%20tidyverse%20is%20an%20opinionated,%2C%20grammar%2C%20and%20data%20structures.&text=See%20how%20the%20tidyverse%20makes,%E2%80%9CR%20for%20Data%20Science%E2%80%9D.) - a collection of packages for data science and analysis, including packages for data import, wrangling and visualisation\n\nWe will use `pacman::p_load` to install (if the packages are not yet installed) and load the packages into the R environment in a single command.\n\n\n::: {.cell}\n\n```{.r .cell-code}\npacman::p_load(tidyverse, jsonlite, tidygraph, ggraph, visNetwork, igraph, plotly, RColorBrewer, graphlayouts, ggforce, tidytext)\n```\n:::\n\n\n## Import Data\n\nWe will use `fromJSON()` of **jsonlite** package to import *MC3.json* into the R environment.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmc3 <- fromJSON(\"data/MC3/MC3.json\")\n```\n:::\n\n\n# Data Preparation\n\n## Extracting all nodes\n\nThe following code chunk is used to extract *nodes* data table from *mc3* list object and save the output in a tibble data frame object called *mc3_nodes_all*. Note that the format of *nodes* inside *mc3* is in list format and not in dataframe format, thus it is not sufficient that we convert the *nodes* to tibble format. We still need to perform additional wrangling below.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# extract all nodes\nmc3_nodes_all <- as_tibble(mc3$nodes) %>% \n  mutate(country = as.character(country),\n         id = as.character(id),\n         product_services = as.character(product_services),\n         revenue_omu = as.numeric(as.character(revenue_omu)),\n         type = as.character(type)) %>% \n  select(id, country, type, revenue_omu, product_services) ## reorganise sequence\n\nhead(mc3_nodes_all)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 5\n  id                                  country type  revenue_omu product_services\n  <chr>                               <chr>   <chr>       <dbl> <chr>           \n1 Jones LLC                           ZH      Comp…  310612303. Automobiles     \n2 Coleman, Hall and Lopez             ZH      Comp…  162734684. Passenger cars,…\n3 Aqua Advancements Sashimi SE Expre… Oceanus Comp…  115004667. Holding firm wh…\n4 Makumba Ltd. Liability Co           Utopor… Comp…   90986413. Car service, ca…\n5 Taylor, Taylor and Farrell          ZH      Comp…   81466667. Fully electric …\n6 Harmon, Edwards and Bates           ZH      Comp…   75070435. Discount superm…\n```\n:::\n:::\n\n\n## Extracting all edges\n\nThe following code chunk is used to extract *edges* data table from *mc3* list object and save the output in a tibble data frame object called *mc3_edges_all*.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmc3_edges_all <- as_tibble(mc3$links) %>% \n  distinct() %>% \n  mutate(source = as.character(source),\n         target = as.character(target),\n         type = as.character(type)) %>% \n  group_by(source, target, type) %>% \n  summarise(weights = n()) %>% \n  filter(source != target) %>% \n  ungroup()\n\nhead(mc3_edges_all)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 4\n  source                    target             type             weights\n  <chr>                     <chr>              <chr>              <int>\n1 1 AS Marine sanctuary     Christina Taylor   Company Contacts       1\n2 1 AS Marine sanctuary     Debbie Sanders     Beneficial Owner       1\n3 1 Ltd. Liability Co Cargo Angela Smith       Beneficial Owner       1\n4 1 S.A. de C.V.            Catherine Cox      Company Contacts       1\n5 1 and Sagl Forwading      Angela Mendoza     Company Contacts       1\n6 1 and Sagl Forwading      Christopher Watson Beneficial Owner       1\n```\n:::\n:::\n\n\n## Approach\n\n### Data Preparation\n\n-   If you refer to product_services field on the nodes of the knowledge graph, you will notice that not all companies are involved in fisheries industry.  With reference to the information provided in product_services field, we can extract and classify the companies into different business groups.\n\n### Analysis\n\n-   Find companies with many layers of beneficiaries (find high eigenvector or high degree centrality?)\n-   Find companies linked to companies from many different countries\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}